<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>
    <link rel="stylesheet" href="/stylesheets/styles.css" />
    <!-- Aseg√∫rate de tener tu archivo CSS -->
  </head>
  <body>
    <div class="dashboard-container">
      <!-- Barra de navegaci√≥n superior -->
      <nav class="top-nav">
        <!-- Search box a la izquierda -->
        <div class="search-box">
          <input type="text" placeholder="Buscar..." />
          <button type="submit">üîç</button>
        </div>

        <!-- Avatar y men√∫ desplegable a la derecha -->
        <div class="user-menu">
          <div class="user-icon" id="user-avatar">
            <img src="/images/user-icon.png" alt="Usuario" />
            <span><%= userName %></span>
          </div>
          <!-- Men√∫ desplegable -->
          <div class="dropdown-menu" id="dropdown-menu">
            <ul>
              <li><a href="/perfil">Administrar perfil</a></li>
              <li><a href="/logout">Cerrar sesi√≥n</a></li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- Sidebar -->
      <aside class="sidebar">
        <ul>
          <li><a href="/expedientes">Expedientes T√©cnicos</a></li>
          <li><a href="/marcas">Marcas</a></li>
          <li><a href="/modelos">Modelos</a></li>
          <!-- Agrega m√°s opciones seg√∫n sea necesario -->
        </ul>
      </aside>

      <!-- Contenido din√°mico -->
      <main class="main-content">
        <%- body %>
        <!-- Aqu√≠ se insertar√° el contenido espec√≠fico de cada p√°gina -->
        <p>Este es el layout base.</p>
        <!-- Depuraci√≥n -->
      </main>
    </div>

    <script>
      // Selecciona el avatar y el men√∫ desplegable
      const userAvatar = document.getElementById("user-avatar");
      const dropdownMenu = document.getElementById("dropdown-menu");

      // Alternar la visibilidad del men√∫ desplegable
      userAvatar.addEventListener("click", function (event) {
        event.stopPropagation(); // Evita que el clic se propague
        userAvatar.parentElement.classList.toggle("active");
      });

      // Cerrar el men√∫ desplegable al hacer clic fuera de √©l
      document.addEventListener("click", function () {
        dropdownMenu.style.display = "none";
        userAvatar.parentElement.classList.remove("active");
      });

      // Evitar que el men√∫ desplegable se cierre al hacer clic dentro de √©l
      dropdownMenu.addEventListener("click", function (event) {
        event.stopPropagation();
      });
    </script>
  </body>
</html>
